<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"
</head><body class="c29"><h2 class="c6" id="h.291injm70153"><span class="c7 c12">Behavior Planning</span></h2><p class="c21"><span class="c0">Intro:</span></p><p class="c21"><span class="c0">In this code above cover self driving car states machines:</span></p><ol class="c15 lst-kix_yhbzk0mr0rox-0 start" start="1"><li class="c8"><span class="c0">Keep lane</span></li><li class="c8"><span class="c0">Change Lane right</span></li><li class="c8"><span class="c0">Prep lane change left</span></li><li class="c8"><span class="c0">Prep lane change right </span></li><li class="c8"><span class="c0">Change lane left</span></li></ol><p class="c21 c22"><span class="c0"></span></p><p class="c21"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 250.67px;"><img alt="" src="images/image3.png" style="width: 624.00px; height: 250.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c21 c22"><span class="c0"></span></p><h2 class="c6" id="h.fqyoliujax40"><span class="c7 c12">Cost function</span></h2><h2 class="c6" id="h.lnp0d3dc6tb2"><span class="c2">To help our decision making on what state to transit we generally use </span><span class="c2 c16">cost functions</span><span class="c2">. Cost functions allow us to penalise bad transitions and to reward good posible transactions. Example:</span></h2><p class="c21 c22"><span class="c0"></span></p><p class="c21"><span class="c0">Goald Distance Cost -Cost Increases based on distance of intended lane (for planning a lane change) and final lane of trajectory. Cost of being out of the goal lane becomes larger as vehicle approaches goal distance.</span></p><p class="c21 c22"><span class="c0"></span></p><a id="t.489cd8a3f7c8a4692c5ed39bd9742f4a74ca269e"></a><a id="t.0"></a><table class="c27"><tbody><tr class="c11"><td class="c20" colspan="1" rowspan="1"><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 252.00px; height: 94.00px;"><img alt="" src="images/image7.png" style="width: 252.00px; height: 94.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c25" colspan="1" rowspan="1"><ul class="c15 lst-kix_nopw90j1nuel-0 start"><li class="c8"><span class="c26">&Delta;</span><span class="c23">d</span><span class="c7 c2">&nbsp;was the lateral distance between the goal lane and the final chosen lane</span></li><li class="c8"><span class="c26">&Delta;</span><span class="c23">s</span><span class="c2">&nbsp;was the longitudinal distance from the vehicle to the goal.</span></li></ul></td></tr></tbody></table><p class="c21 c22"><span class="c2 c7"></span></p><p class="c21"><span class="c7 c2">Cost Code Example:</span></p><p class="c24"><span class="c1">&nbsp; &nbsp;</span><span class="c13">int</span><span class="c1">&nbsp;delta_d = </span><span class="c9">2.0 </span><span class="c1">* goal_lane - intended_lane - final_lane;<br> &nbsp; </span><span class="c13">float</span><span class="c1">&nbsp;cost = </span><span class="c9">1</span><span class="c1">&nbsp;- </span><span class="c14">exp</span><span class="c1">(-(</span><span class="c14">abs</span><span class="c1">(delta_d) / distance_to_goal));<br> &nbsp; </span><span class="c13">return</span><span class="c1 c19">&nbsp;cost;</span></p><p class="c24"><span class="c1 c19">Cost Table implemented: </span></p><a id="t.c7e7fc7d27ad710c521a8b0e5b5d2e038ffc2b3c"></a><a id="t.1"></a><table class="c27"><tbody><tr class="c11"><td class="c30" colspan="1" rowspan="1"><p class="c17"><span class="c2">Penalizes trajectories that attempt to accelerate at a rate which is not possible for the vehicle.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 258.00px; height: 118.00px;"><img alt="" src="images/image4.png" style="width: 258.00px; height: 118.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c18"><span class="c2">Penalizes trajectories that drive off the road.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 297.00px; height: 130.67px;"><img alt="" src="images/image5.png" style="width: 297.00px; height: 130.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c11"><td class="c30" colspan="1" rowspan="1"><p class="c18"><span class="c7 c10">Penalizes trajectories that exceed the speed limit.</span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 282.00px; height: 106.00px;"><img alt="" src="images/image1.png" style="width: 282.00px; height: 106.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c18"><span class="c7 c10">Penalizes trajectories that do not stay near the center of the lane.</span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 297.00px; height: 124.00px;"><img alt="" src="images/image6.png" style="width: 297.00px; height: 124.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c3"><td class="c28" colspan="2" rowspan="1"><p class="c18 c22"><span class="c7 c10"></span></p><p class="c18"><span class="c10">Rewards trajectories that stay near the target lane.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 433.00px; height: 54.00px;"><img alt="" src="images/image2.png" style="width: 433.00px; height: 54.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c18 c22"><span class="c7 c10"></span></p></td></tr></tbody></table><p class="c21 c22"><span class="c0"></span></p></body></html>