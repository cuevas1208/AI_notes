<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_nopw90j1nuel-3{list-style-type:none}.lst-kix_yhbzk0mr0rox-4>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-4,lower-latin) ". "}ol.lst-kix_yhbzk0mr0rox-7{list-style-type:none}ul.lst-kix_nopw90j1nuel-4{list-style-type:none}ol.lst-kix_yhbzk0mr0rox-8{list-style-type:none}ul.lst-kix_nopw90j1nuel-1{list-style-type:none}.lst-kix_yhbzk0mr0rox-3>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-3,decimal) ". "}.lst-kix_yhbzk0mr0rox-5>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-5,lower-roman) ". "}ol.lst-kix_yhbzk0mr0rox-7.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-7 0}ul.lst-kix_nopw90j1nuel-2{list-style-type:none}.lst-kix_yhbzk0mr0rox-2>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-2,lower-roman) ". "}ol.lst-kix_yhbzk0mr0rox-3{list-style-type:none}.lst-kix_yhbzk0mr0rox-6>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-6,decimal) ". "}ul.lst-kix_nopw90j1nuel-0{list-style-type:none}ol.lst-kix_yhbzk0mr0rox-4{list-style-type:none}.lst-kix_yhbzk0mr0rox-4>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-4}ol.lst-kix_yhbzk0mr0rox-5{list-style-type:none}ol.lst-kix_yhbzk0mr0rox-6{list-style-type:none}.lst-kix_yhbzk0mr0rox-8>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-8,lower-roman) ". "}ol.lst-kix_yhbzk0mr0rox-0{list-style-type:none}.lst-kix_yhbzk0mr0rox-1>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-1,lower-latin) ". "}ol.lst-kix_yhbzk0mr0rox-1{list-style-type:none}.lst-kix_yhbzk0mr0rox-7>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-7,lower-latin) ". "}ol.lst-kix_yhbzk0mr0rox-2{list-style-type:none}ul.lst-kix_nopw90j1nuel-7{list-style-type:none}ul.lst-kix_nopw90j1nuel-8{list-style-type:none}ul.lst-kix_nopw90j1nuel-5{list-style-type:none}ul.lst-kix_nopw90j1nuel-6{list-style-type:none}.lst-kix_yhbzk0mr0rox-0>li:before{content:"" counter(lst-ctn-kix_yhbzk0mr0rox-0,decimal) ". "}ol.lst-kix_yhbzk0mr0rox-0.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-0 0}ol.lst-kix_yhbzk0mr0rox-4.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-4 0}ol.lst-kix_yhbzk0mr0rox-6.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-6 0}.lst-kix_yhbzk0mr0rox-6>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-6}.lst-kix_yhbzk0mr0rox-0>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-0}ol.lst-kix_yhbzk0mr0rox-3.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-3 0}.lst-kix_yhbzk0mr0rox-3>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-3}.lst-kix_yhbzk0mr0rox-1>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-1}ol.lst-kix_yhbzk0mr0rox-5.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-5 0}.lst-kix_yhbzk0mr0rox-7>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-7}.lst-kix_nopw90j1nuel-2>li:before{content:"\0025a0  "}.lst-kix_nopw90j1nuel-0>li:before{content:"\0025cf  "}.lst-kix_nopw90j1nuel-4>li:before{content:"\0025cb  "}.lst-kix_nopw90j1nuel-1>li:before{content:"\0025cb  "}.lst-kix_nopw90j1nuel-5>li:before{content:"\0025a0  "}ol.lst-kix_yhbzk0mr0rox-2.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-2 0}.lst-kix_yhbzk0mr0rox-8>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-8}.lst-kix_nopw90j1nuel-3>li:before{content:"\0025cf  "}.lst-kix_nopw90j1nuel-8>li:before{content:"\0025a0  "}ol.lst-kix_yhbzk0mr0rox-1.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-1 0}.lst-kix_nopw90j1nuel-6>li:before{content:"\0025cf  "}.lst-kix_yhbzk0mr0rox-2>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-2}.lst-kix_yhbzk0mr0rox-5>li{counter-increment:lst-ctn-kix_yhbzk0mr0rox-5}ol.lst-kix_yhbzk0mr0rox-8.start{counter-reset:lst-ctn-kix_yhbzk0mr0rox-8 0}.lst-kix_nopw90j1nuel-7>li:before{content:"\0025cb  "}ol{margin:0;padding:0}table td,table th{padding:0}.c30{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:234.8pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c5{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:233.2pt;border-top-color:#000000;border-bottom-style:solid}.c25{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:303pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:204.8pt;border-top-color:#000000;border-bottom-style:solid}.c8{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c24{padding-top:15pt;padding-bottom:15pt;line-height:1.42857;orphans:2;widows:2;text-align:left}.c21{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c17{padding-top:15pt;padding-bottom:15pt;line-height:1.42857;orphans:2;widows:2;text-align:center}.c23{background-color:#ffffff;color:#4f4f4f;font-weight:400;font-size:13.5pt;font-family:"Times New Roman";font-style:italic}.c14{background-color:#fafbfc;font-size:10pt;font-family:"Courier New";color:#0086b3;font-weight:400}.c13{background-color:#fafbfc;font-size:10pt;font-family:"Courier New";color:#333333;font-weight:700}.c1{background-color:#fafbfc;font-size:10pt;font-family:"Courier New";color:#525c65;font-weight:400}.c9{background-color:#fafbfc;font-size:10pt;font-family:"Courier New";color:#008080;font-weight:400}.c6{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:center}.c7{font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c26{background-color:#ffffff;font-size:13.5pt;font-family:"Times New Roman";color:#4f4f4f;font-weight:400}.c18{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c27{border-spacing:0;border-collapse:collapse;margin-right:auto}.c2{background-color:#ffffff;font-size:10.5pt;color:#4f4f4f}.c10{background-color:#fafbfc;color:#4f4f4f;font-size:10.5pt}.c29{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c19{text-decoration:none;vertical-align:baseline;font-style:normal}.c15{padding:0;margin:0}.c12{color:#000000;font-size:16pt}.c16{font-weight:700}.c11{height:0pt}.c22{height:11pt}.c3{height:20pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c29"><h2 class="c6" id="h.291injm70153"><span class="c7 c12">Behavior Planning</span></h2><p class="c21"><span class="c0">Intro:</span></p><p class="c21"><span class="c0">In this code above cover self driving car states machines:</span></p><ol class="c15 lst-kix_yhbzk0mr0rox-0 start" start="1"><li class="c8"><span class="c0">Keep lane</span></li><li class="c8"><span class="c0">Change Lane right</span></li><li class="c8"><span class="c0">Prep lane change left</span></li><li class="c8"><span class="c0">Prep lane change right </span></li><li class="c8"><span class="c0">Change lane left</span></li></ol><p class="c21 c22"><span class="c0"></span></p><p class="c21"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 250.67px;"><img alt="" src="images/image3.png" style="width: 624.00px; height: 250.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c21 c22"><span class="c0"></span></p><h2 class="c6" id="h.fqyoliujax40"><span class="c7 c12">Cost function</span></h2><h2 class="c6" id="h.lnp0d3dc6tb2"><span class="c2">To help our decision making on what state to transit we generally use </span><span class="c2 c16">cost functions</span><span class="c2">. Cost functions allow us to penalise bad transitions and to reward good posible transactions. Example:</span></h2><p class="c21 c22"><span class="c0"></span></p><p class="c21"><span class="c0">Goald Distance Cost -Cost Increases based on distance of intended lane (for planning a lane change) and final lane of trajectory. Cost of being out of the goal lane becomes larger as vehicle approaches goal distance.</span></p><p class="c21 c22"><span class="c0"></span></p><a id="t.489cd8a3f7c8a4692c5ed39bd9742f4a74ca269e"></a><a id="t.0"></a><table class="c27"><tbody><tr class="c11"><td class="c20" colspan="1" rowspan="1"><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 252.00px; height: 94.00px;"><img alt="" src="images/image7.png" style="width: 252.00px; height: 94.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c25" colspan="1" rowspan="1"><ul class="c15 lst-kix_nopw90j1nuel-0 start"><li class="c8"><span class="c26">&Delta;</span><span class="c23">d</span><span class="c7 c2">&nbsp;was the lateral distance between the goal lane and the final chosen lane</span></li><li class="c8"><span class="c26">&Delta;</span><span class="c23">s</span><span class="c2">&nbsp;was the longitudinal distance from the vehicle to the goal.</span></li></ul></td></tr></tbody></table><p class="c21 c22"><span class="c2 c7"></span></p><p class="c21"><span class="c7 c2">Cost Code Example:</span></p><p class="c24"><span class="c1">&nbsp; &nbsp;</span><span class="c13">int</span><span class="c1">&nbsp;delta_d = </span><span class="c9">2.0 </span><span class="c1">* goal_lane - intended_lane - final_lane;<br> &nbsp; </span><span class="c13">float</span><span class="c1">&nbsp;cost = </span><span class="c9">1</span><span class="c1">&nbsp;- </span><span class="c14">exp</span><span class="c1">(-(</span><span class="c14">abs</span><span class="c1">(delta_d) / distance_to_goal));<br> &nbsp; </span><span class="c13">return</span><span class="c1 c19">&nbsp;cost;</span></p><p class="c24"><span class="c1 c19">Cost Table implemented: </span></p><a id="t.c7e7fc7d27ad710c521a8b0e5b5d2e038ffc2b3c"></a><a id="t.1"></a><table class="c27"><tbody><tr class="c11"><td class="c30" colspan="1" rowspan="1"><p class="c17"><span class="c2">Penalizes trajectories that attempt to accelerate at a rate which is not possible for the vehicle.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 258.00px; height: 118.00px;"><img alt="" src="images/image4.png" style="width: 258.00px; height: 118.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c18"><span class="c2">Penalizes trajectories that drive off the road.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 297.00px; height: 130.67px;"><img alt="" src="images/image5.png" style="width: 297.00px; height: 130.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c11"><td class="c30" colspan="1" rowspan="1"><p class="c18"><span class="c7 c10">Penalizes trajectories that exceed the speed limit.</span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 282.00px; height: 106.00px;"><img alt="" src="images/image1.png" style="width: 282.00px; height: 106.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c18"><span class="c7 c10">Penalizes trajectories that do not stay near the center of the lane.</span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 297.00px; height: 124.00px;"><img alt="" src="images/image6.png" style="width: 297.00px; height: 124.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c3"><td class="c28" colspan="2" rowspan="1"><p class="c18 c22"><span class="c7 c10"></span></p><p class="c18"><span class="c10">Rewards trajectories that stay near the target lane.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 433.00px; height: 54.00px;"><img alt="" src="images/image2.png" style="width: 433.00px; height: 54.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c18 c22"><span class="c7 c10"></span></p></td></tr></tbody></table><p class="c21 c22"><span class="c0"></span></p></body></html>